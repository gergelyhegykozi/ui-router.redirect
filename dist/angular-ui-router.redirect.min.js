/**
 * A helper module for AngularUI Router, which allows you to handle redirect chains
 * @version v0.1.3
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */!function(){"use strict";function a(a){function b(a){f=a}function c(b){g=b,a.otherwise(b)}function d(a){h=!!a}function e(a,b,c,d,e,i){function j(b,c,d,e,f,g){v||(b.preventDefault(),a.$broadcast("$redirectStart",c,d),g&&(g.location=g.relative?g.location:!0,delete g.$retry,delete g.relative),l({name:c.name,params:d,options:g||{}}))}function k(){var a=angular.noop,b="";if(1===arguments.length?a=arguments[0]:2===arguments.length&&(b=arguments[0],a=arguments[1]),!angular.isString(b))throw new Error("Condition should be string");if(!angular.isFunction(a))throw new Error("Callback should be function");return t.push({condition:b,callback:a}),this}function l(a){var b=c.defer();if(o(a))b.resolve(!0);else{u=[];var d=q(a,++w);if(d){if(d.then)return d;b.resolve(d)}else b.reject()}return b.promise}function m(a,b){return x[a]=b,x[a]}function n(a){return x[a]}function o(a){for(var b=0,c=u.length;c>b;b++)if(angular.equals(a,u[b]))return!0;return!1}function p(a){var b=0,c=u.length,d=angular.copy(a);for(h&&console.info("Redirect to:",d);c>b;b++)if(angular.equals(d,u[b]))throw console.info("Redirect queue:",u),new Error("Infinite redirect loop");u.push(d)}function q(a,b){var g=0,h=!0,i=function(a,c){if(a.params=a.params||{},a.options=a.options||{},w!==b)return!1;if(g===t.length)return a&&a.name&&s(a),a;c||p(a);var d=t[g].condition,e=t[g].callback;return h=!d||new RegExp("^"+d+"$").test(a.name)?e.call(z,a):!0,j(a,h)},j=function(a,h){if(h&&h.then){var k=c.defer();return h.then(function(b){k.resolve(j(a,b))},function(a){d(function(){f(e)}),k.reject()}),k.promise}if(h&&h.name)return q(h,b);if(h===!0)return g++,i(a,!0);if(h)throw new Error("Wrong redirect format");return r(),d(function(){f(e)}),!1};return a.options=angular.extend({},A,a.options),i(a)}function r(){u=[],w=0}function s(c){var d=b.get(c.name),f=b.current.name,h="",j=i.search(),k=w;r(),d||a.$broadcast("$redirectNotFound",c),d||g===angular.noop?(v=!0,y||(y=!0,h=i.hash()),b.go(c.name,c.params,c.options).then(function(){h&&!f&&i.hash(h),1===k&&Object.keys(j).length&&i.search(j).replace()}),v=!1):g(e)}var t=[],u=[],v=!1,w=0,x={},y=!1,z={add:k,_go:l,set:m,get:n},A={inherit:!0,location:!0,notify:!0,reload:!1};return a.$on("$stateChangeStart",j),z}var f=angular.noop,g=angular.noop,h=!1;return e.$inject=["$rootScope","$state","$q","$timeout","$injector","$location"],{otherwise:b,notFound:c,setDebug:d,$get:e}}angular.module("ui.router.redirect",["ui.router"]).provider("$redirect",a),a.$inject=["$urlRouterProvider"]}();