/**
 * A helper module for AngularUI Router, which allows you to handle redirect chains
 * @version v0.1.0
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */!function(){"use strict";function a(){function a(a){e=a}function b(a){f=a}function c(a){g=!!a}function d(a,b,c,d,h){function i(b,c,d,e,f,g){u||(b.preventDefault(),a.$broadcast("$redirectStart",c,d),k({name:c.name,params:d,options:g||{}}))}function j(a){return s.push(a),this}function k(a){var b=c.defer();if(n(a))b.resolve(!0);else{t=[];var d=p(a,++v);if(d){if(d.then)return d;b.resolve(d)}else b.reject()}return b.promise}function l(a,b){return w[a]=b,w[a]}function m(a){return w[a]}function n(a){for(var b=0,c=t.length;c>b;b++)if(angular.equals(a,t[b]))return!0;return!1}function o(a){var b=0,c=t.length,d=angular.copy(a);for(g&&console.info("Redirect to:",d);c>b;b++)if(angular.equals(d,t[b]))throw console.info("Redirect queue:",t),new Error("Infinite redirect loop");t.push(d)}function p(a,b){var f=0,g=!0,i=function(a,c){return a.params=a.params||{},a.options=a.options||{},v!==b?!1:f===s.length?(a&&a.name&&r(a),a):(c||o(a),g=s[f].call(x,a),j(a,g))},j=function(a,g){if(g&&g.then){var k=c.defer();return g.then(function(b){k.resolve(j(a,b))},function(b){d(function(){e(h,a,b)}),k.reject()}),k.promise}if(g&&g.name)return p(g,b);if(g===!0)return f++,i(a,!0);if(g)throw new Error("Wrong redirect format");return q(),d(function(){e(h,a,g)}),!1};return i(a)}function q(){t=[],v=0}function r(c){var d=b.get(c.name);q(),d||a.$broadcast("$redirectNotFound",c),d||f===angular.noop?(u=!0,b.go(c.name,c.params,c.options),u=!1):f(h,c)}var s=[],t=[],u=!1,v=0,w={},x={add:j,_go:k,set:l,get:m};return a.$on("$stateChangeStart",i),x}var e=angular.noop,f=angular.noop,g=!1;return d.$inject=["$rootScope","$state","$q","$timeout","$injector"],{otherwise:a,notFound:b,setDebug:c,$get:d}}angular.module("ui.router.redirect",["ui.router"]).provider("$redirect",a)}();